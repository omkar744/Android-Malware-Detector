var WorldTrackingModule=function(n,r,o,e,t){"use strict";function _(e,_,t,r){var n,o=arguments.length,a=o<3?_:null===r?r=Object.getOwnPropertyDescriptor(_,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,_,t,r);else for(var T=e.length-1;0<=T;T--)(n=e[T])&&(a=(o<3?n(a):3<o?n(_,t,a):n(_,t))||a);return 3<o&&a&&Object.defineProperty(_,t,a),a}var a;(a=n.ARTrackableType||(n.ARTrackableType={}))["UNKNOWN"]="UNKNOWN",a["VERTICAL_PLANE"]="VERTICAL_PLANE",a["HORIZONTAL_PLANE"]="HORIZONTAL_PLANE",a["FEATURE_POINT"]="FEATURE_POINT";var T,i={0:n.ARTrackableType.UNKNOWN,1:n.ARTrackableType.VERTICAL_PLANE,2:n.ARTrackableType.HORIZONTAL_PLANE,3:n.ARTrackableType.FEATURE_POINT};(T=n.TrackingStateReason||(n.TrackingStateReason={}))["NONE"]="NONE",T["INITIALIZING"]="INITIALIZING",T["EXCESSIVE_MOTION"]="EXCESSIVE_MOTION",T["INSUFFICIENT_LIGHT"]="INSUFFICIENT_LIGHT",T["INSUFFICIENT_FEATURES"]="INSUFFICIENT_FEATURES";var I,N={0:n.TrackingStateReason.NONE,1:n.TrackingStateReason.INITIALIZING,2:n.TrackingStateReason.EXCESSIVE_MOTION,3:n.TrackingStateReason.INSUFFICIENT_LIGHT,4:n.TrackingStateReason.INSUFFICIENT_FEATURES};(I=n.HitTestType||(n.HitTestType={}))["HORIZONTAL_PLANE"]="HORIZONTAL_PLANE",I["VERTICAL_PLANE"]="VERTICAL_PLANE",I["ANY_PLANE"]="ANY_PLANE",I["FEATURE_POINT"]="FEATURE_POINT";var l,E,c={HORIZONTAL_PLANE:0,VERTICAL_PLANE:1,ANY_PLANE:2,FEATURE_POINT:3};n.HitTestType.HORIZONTAL_PLANE,n.HitTestType.VERTICAL_PLANE,n.HitTestType.ANY_PLANE,n.HitTestType.FEATURE_POINT;(E=l=l||{})["N_O_T__T_R_A_C_K_I_N_G"]="N_O_T__T_R_A_C_K_I_N_G",E["L_O_W"]="L_O_W",E["M_E_D_I_U_M"]="M_E_D_I_U_M",E["H_I_G_H"]="H_I_G_H";var A,u;l.N_O_T__T_R_A_C_K_I_N_G,l.L_O_W,l.M_E_D_I_U_M,l.H_I_G_H;(u=A=A||{})["N_O_T__T_R_A_C_K_I_N_G"]="N_O_T__T_R_A_C_K_I_N_G",u["L_O_W"]="L_O_W",u["H_I_G_H"]="H_I_G_H";var p,O;A.N_O_T__T_R_A_C_K_I_N_G,A.L_O_W,A.H_I_G_H;(O=p=p||{})["NONE"]="NONE",O["RELOCALIZING"]="RELOCALIZING",O["EXCESSIVE_MOTION"]="EXCESSIVE_MOTION",O["INITIALIZING"]="INITIALIZING",O["INSUFFICIENT_FEATURES"]="INSUFFICIENT_FEATURES",O["INSUFFICIENT_LIGHT"]="INSUFFICIENT_LIGHT",O["BAD_STATE"]="BAD_STATE",O["UNKNOWN"]="UNKNOWN";var L,d;p.NONE,p.RELOCALIZING,p.EXCESSIVE_MOTION,p.INITIALIZING,p.INSUFFICIENT_FEATURES,p.INSUFFICIENT_LIGHT,p.BAD_STATE,p.UNKNOWN;(d=L=L||{})["N_O_N_E"]="N_O_N_E",d["P_L_A_T_F_O_R_M__S_L_A_M"]="P_L_A_T_F_O_R_M__S_L_A_M",d["V_I_P_E_R_L_I_T_E"]="V_I_P_E_R_L_I_T_E",d["V_E_G_A_L_I_T_E"]="V_E_G_A_L_I_T_E",d["W_O_L_F__O_U_T_P_U_T__P_L_A_T_F_O_R_M__S_L_A_M"]="W_O_L_F__O_U_T_P_U_T__P_L_A_T_F_O_R_M__S_L_A_M",d["W_O_L_F__O_U_T_P_U_T__V_I_P_E_R_L_I_T_E"]="W_O_L_F__O_U_T_P_U_T__V_I_P_E_R_L_I_T_E",d["W_O_L_F__O_U_T_P_U_T__V_E_G_A_L_I_T_E"]="W_O_L_F__O_U_T_P_U_T__V_E_G_A_L_I_T_E";var f;L.N_O_N_E,L.P_L_A_T_F_O_R_M__S_L_A_M,L.V_I_P_E_R_L_I_T_E,L.V_E_G_A_L_I_T_E,L.W_O_L_F__O_U_T_P_U_T__P_L_A_T_F_O_R_M__S_L_A_M,L.W_O_L_F__O_U_T_P_U_T__V_I_P_E_R_L_I_T_E,L.W_O_L_F__O_U_T_P_U_T__V_E_G_A_L_I_T_E;(f=n.TrackingState||(n.TrackingState={}))["NOT_AVAILABLE"]="NOT_AVAILABLE",f["LIMITED"]="LIMITED",f["TRACKING"]="TRACKING";var s,R,S={0:n.TrackingState.NOT_AVAILABLE,1:n.TrackingState.LIMITED,2:n.TrackingState.TRACKING};(R=s=s||{})["TAP"]="TAP",R["PAN"]="PAN",R["PINCH"]="PINCH",R["ROTATE"]="ROTATE",R["LONG_PRESS"]="LONG_PRESS",R["RAW_TOUCH"]="RAW_TOUCH";var P,g;s.TAP,s.PAN,s.PINCH,s.ROTATE,s.LONG_PRESS,s.RAW_TOUCH;(g=P=P||{})["BEGAN"]="BEGAN",g["CHANGED"]="CHANGED",g["ENDED"]="ENDED",g["CANCELED"]="CANCELED",g["FAILED"]="FAILED";var b,y,C={BEGAN:0,CHANGED:1,ENDED:2,CANCELED:3,FAILED:4};P.BEGAN,P.CHANGED,P.ENDED,P.CANCELED,P.FAILED;(y=b=b||{})["RAY_CAST"]="RAY_CAST",y["SHADER_PICK"]="SHADER_PICK";b.RAY_CAST,b.SHADER_PICK;function v(e){return o.getCoreModule().mapStringToScalar(e,C,3)}var U=r.getNativeModule("WorldTracking"),F={};function m(e){if(!F[e]){var _=function(e){var _=o.model.graph.get(e);if(_)return new k(_)}(new o.model.NodeId(e));_&&(F[e]=_)}return F[e]}function H(e,_){return r.getModule("Reactive").point(t.fromMeters(e.getScalarSignal(_+"/x")),t.fromMeters(e.getScalarSignal(_+"/y")),t.fromMeters(e.getScalarSignal(_+"/z")))}var k=(Object.defineProperty(G.prototype,"id",{get:function(){var e=this._ref.constants.identifier;return e?r.getModule("Reactive").val(e):this._ref.getStringSignal("identifier")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"transform",{get:function(){return this._ref.getTransformSignal("transform")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"type",{get:function(){return o.getCoreModule().mapScalarToString(this._ref.getScalarSignal("type"),i,n.ARTrackableType.UNKNOWN)},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"center",{get:function(){return H(this._ref,"center")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"extent",{get:function(){return H(this._ref,"extent")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"normal",{get:function(){return H(this._ref,"normal")},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"isTracked",{get:function(){return this._ref.getBoolSignal("isTracked")},enumerable:!0,configurable:!0}),_([r.internal,r.nonenumerable],G.prototype,"_ref",void 0),G);function G(e){this._ref=e}var M=(Object.defineProperty(h.prototype,"transform",{get:function(){return U.referencePointTransform(this._id)},enumerable:!0,configurable:!0}),h.prototype.move=function(e){var _,t,r;U.moveReferencePoint(this._id,e.screenLocation,v(e.state),null!=(_=null==e?void 0:e.snapToPlane)&&_,c[null!=(t=null==e?void 0:e.planeType)?t:n.HitTestType.ANY_PLANE],null!=(r=null==e?void 0:e.fallbackToEstimatedPlanes)&&r)},Object.defineProperty(h.prototype,"plane",{get:function(){return new k(new o.model.ModelRef(this._planeId,"trackable",{}))},enumerable:!0,configurable:!0}),_([r.internal,r.nonenumerable],h.prototype,"_id",void 0),_([r.internal,r.nonenumerable],h.prototype,"_planeId",void 0),h);function h(e,_){this._id=e,this._planeId=_}var D=(Object.defineProperty(W.prototype,"intersectionPoint",{get:function(){return this._res.position},enumerable:!0,configurable:!0}),Object.defineProperty(W.prototype,"trackable",{get:function(){var e=m(this._res.trackableId);if(!e)throw"Trackable in HitTestResult is no longer valid.";return e},enumerable:!0,configurable:!0}),_([r.nonenumerable],W.prototype,"_res",void 0),W);function W(e){this._res=e}var V=(K.prototype.addReferencePoint=function(e){var _,t;return r.eventSourceToPromise(U.addReferencePoint(e.worldPosition,null!=(t=null===(_=e.trackable)||void 0===_?void 0:_._ref.id.value)?t:0)).then(function(e){return new M(e.id,new o.model.NodeId(e.plane))})},K.prototype.deleteReferencePoint=function(e){U.deleteReferencePoint(e._id)},K.prototype.onTrackableAdded=function(){return r.mapEventSource(o.model.graph.onChildConnected(new o.model.NodeId(e.trackablesChildrenNodeId)),function(e){return m(e.id.value)})},K.prototype.onTrackableDeleted=function(){return r.mapEventSource(o.model.graph.onChildDisconnected(new o.model.NodeId(e.trackablesChildrenNodeId)),function(e){return m(e.id.value)})},K.prototype.hitTest=function(e){var _,t;return r.eventSourceToPromise(U.hitTest(e.screenLocation,c[null!=(_=null==e?void 0:e.hitTestType)?_:n.HitTestType.ANY_PLANE],null!=(t=null==e?void 0:e.fallbackToEstimatedPlanes)&&t)).then(function(e){return e.map(function(e){return new D(e)})})},Object.defineProperty(K.prototype,"realWorldScaleActive",{get:function(){return U.realWorldScaleActive()},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"realWorldScaleSupported",{get:function(){return U.realWorldScaleSupported()},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"state",{get:function(){return o.getCoreModule().mapScalarToString(U.state(),S,n.TrackingState.NOT_AVAILABLE)},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"stateReason",{get:function(){return o.getCoreModule().mapScalarToString(U.stateReason(),N,n.TrackingStateReason.NONE)},enumerable:!0,configurable:!0}),_([r.enumAccessor],K.prototype,"ARTrackableType",void 0),_([r.enumAccessor],K.prototype,"HitTestType",void 0),_([r.enumAccessor],K.prototype,"TrackingState",void 0),_([r.enumAccessor],K.prototype,"TrackingStateReason",void 0),K=_([r.scriptingModule("WorldTracking")],K));function K(){this.ARTrackableType=n.ARTrackableType,this.HitTestType=n.HitTestType,this.TrackingState=n.TrackingState,this.TrackingStateReason=n.TrackingStateReason}return n.ARReferencePoint=M,n.ARTrackable=k,n.HitTestResult=D,n.WorldTrackingModule=V,n.toInternalGestureState=v,n}({},arfx,CoreModule,params,UnitsModule);