var CoreModule=function(t,e){"use strict";var n;function o(){var t;return null!=n?n:(t=e.getNativeModule("Core"),n=null!=t?t:{deprecatedFunctionalityUsed:function(){},log:function(){},reportMustFix:function(){},registerModelSyncHandler:function(){},getBoolSignal:function(t,n){throw"unimplemented"},getScalarSignal:function(t,n){throw"unimplemented"},getStringSignal:function(t,n){throw"unimplemented"},getEnumSignal:function(t,n){throw"unimplemented"},getDimenSignal:function(t,n){throw"unimplemented"},getTransformSignal:function(t,n){throw"unimplemented"},getBoolProp:function(t,n){throw"unimplemented"},getScalarProp:function(t,n){throw"unimplemented"},getStringProp:function(t,n){throw"unimplemented"},getBoolPropSync:function(t,n){throw"unimplemented"},getScalarPropSync:function(t,n){throw"unimplemented"},getStringPropSync:function(t,n){throw"unimplemented"},getEnumPropSync:function(t,n){throw"unimplemented"},getDimenPropSync:function(){throw"unimplemented"},getArrayRefPropSync:function(){throw"unimplemented"},getArrayRefProp:function(){throw"unimplemented"},notifyChanged:function(){},mapScalarToString:function(){},mapStringToScalar:function(){},setBool:function(){},setScalar:function(){},setString:function(){},setStringAsync:function(){throw"unimplemented"},setEnum:function(){},setDimen:function(){},bindBool:function(){},bindScalar:function(){},bindString:function(){},bindEnum:function(){},bindDimen:function(){},bindColor:function(){},bindHsvaVector:function(){},create:function(){throw"unimplemented"},remove:function(){throw"unimplemented"},clone:function(){throw"unimplemented"},connectToParent:function(){throw"unimplemented"},getChildrenSync:function(){throw"unimplemented"},getChildren:function(){throw"unimplemented"}})}var l=(i.prototype.isEmpty=function(){return 0==this.value},i.prototype.equals=function(t){return this.value===t.value},i.EMPTY=new i(0),i);function i(t){this.value=t}function r(t){var n;return new u(new l(t.id),t.kind,null!=(n=t.constants)?n:{})}var u=(s.prototype.getBoolSignal=function(t){return o().getBoolSignal(this.id.value,t)},s.prototype.getScalarSignal=function(t){return o().getScalarSignal(this.id.value,t)},s.prototype.getStringSignal=function(t){return o().getStringSignal(this.id.value,t)},s.prototype.getEnumSignal=function(t){return o().getEnumSignal(this.id.value,t)},s.prototype.getDimenSignal=function(t){return o().getDimenSignal(this.id.value,t)},s.prototype.getTransformSignal=function(t){return o().getTransformSignal(this.id.value,t)},s.prototype.getBool=function(t){return e.eventSourceToPromise(o().getBoolProp(this.id.value,t))},s.prototype.getScalar=function(t){return e.eventSourceToPromise(o().getScalarProp(this.id.value,t))},s.prototype.getString=function(t){return e.eventSourceToPromise(o().getStringProp(this.id.value,t))},s.prototype.getBoolSync=function(t){return o().getBoolPropSync(this.id.value,t)},s.prototype.getScalarSync=function(t){return o().getScalarPropSync(this.id.value,t)},s.prototype.getStringSync=function(t){return o().getStringPropSync(this.id.value,t)},s.prototype.getEnumSync=function(t){return o().getEnumPropSync(this.id.value,t)},s.prototype.getDimenSync=function(t){return o().getDimenPropSync(this.id.value,t)},s.prototype.setBoolProp=function(t,n){"boolean"==typeof n?o().setBool(this.id.value,t,n):o().bindBool(this.id.value,t,n)},s.prototype.setScalarProp=function(t,n){"number"==typeof n?o().setScalar(this.id.value,t,n):o().bindScalar(this.id.value,t,n)},s.prototype.setStringProp=function(t,n){"string"==typeof n?o().setString(this.id.value,t,n):o().bindString(this.id.value,t,n)},s.prototype.setStringAsync=function(t,n){return e.eventSourceToPromise(o().setStringAsync(this.id.value,t,n)).then(function(t){})},s.prototype.setEnumProp=function(t,n,e){"string"==typeof n?o().setEnum(this.id.value,t,n):o().bindEnum(this.id.value,t,n,null!=e?e:0)},s.prototype.setDimenProp=function(t,n){"number"==typeof n?o().setDimen(this.id.value,t,n):o().bindDimen(this.id.value,t,n)},s.prototype.setColorProp=function(t,n){o().bindColor(this.id.value,t,n)},s.prototype.setHsvaVecProp=function(t,n){o().bindHsvaVector(this.id.value,t,n)},s.prototype.notifyChanged=function(t){o().notifyChanged(this.id.value,t)},s.prototype.getArrayRefProp=function(t){return e.eventSourceToPromise(o().getArrayRefProp(this.id.value,t)).then(r)},s.prototype.getArrayRefPropSync=function(t){var n=o().getArrayRefPropSync(this.id.value,t);return null==n?null:r(n)},s.prototype.getChildren=function(){return e.eventSourceToPromise(o().getChildren(this.id.value)).then(function(t){return t.map(r)})},s.prototype.getChildrenSync=function(){return o().getChildrenSync(this.id.value).map(r)},s.prototype.addChild=function(t){return e.eventSourceToPromise(o().connectToParent(t.id.value,this.id.value)).then(function(t){})},s.prototype.destroy=function(){if(this.id.equals(l.EMPTY))return Promise.resolve();var n=this;return e.eventSourceToPromise(o().remove(this.id.value)).then(function(t){return v.remove(n.id)})},s);function s(t,n,e){this.id=t,this.kind=n,this.constants=e}var a,c,d=function(t,n,e){this.parent=l.EMPTY,this.next=l.EMPTY,this.prev=l.EMPTY,this.firstChild=l.EMPTY,this.lastChild=l.EMPTY,this.ref=new u(t,n,null!=e?e:{})};function p(){this.nodes=[null],this.onConnected={},this.onDisconnected={};var n=this;o().registerModelSyncHandler(function(t){return n.apply(t)})}(c=a=a||{})[c["CONTINUE"]=0]="CONTINUE",c[c["SKIP_CHILDREN"]=1]="SKIP_CHILDREN",c[c["STOP"]=2]="STOP";var f,h,v=new(p.prototype.create=function(t,n){return e.eventSourceToPromise(o().create(t,0,n)).then(function(t){return v.apply({removed:[],updated:[t]}),v.getOrThrow(new l(t.id))})},p.prototype.clone=function(t,n){return e.eventSourceToPromise(o().clone(t.id.value,0,n)).then(function(t){return v.apply({removed:[],updated:[t]}),v.getOrThrow(new l(t.id))})},p.prototype.apply=function(t){for(var n=0;n<t.removed.length;++n)this.remove(new l(t.removed[n]));for(n=0;n<t.updated.length;++n)this.update(t.updated[n])},p.prototype.get=function(t){var n;return null===(n=this.nodes[t.value])||void 0===n?void 0:n.ref},p.prototype.getOrThrow=function(t){return this.getNode(t).ref},p.prototype.getNode=function(t){var n=this.nodes[t.value];if(null==n)throw new Error("Node not found for id "+t.value);return n},p.prototype.update=function(t){var n,e=new l(t.id),o=this.nodes[t.id];if(null==o){for(o=new d(e,t.kind,t.constants);this.nodes.length<t.id;)this.nodes.push(null);this.nodes[t.id]=o}else o.ref.kind=t.kind,o.ref.constants=null!=(n=t.constants)?n:o.ref.constants;o.parent.isEmpty()||this.disconnect(e),t.parent&&this.connect(e,new l(t.parent),t.prev?new l(t.prev):void 0)},p.prototype.connect=function(t,n,e){var o,i=this.getNode(t);i.parent=n;var r=this.nodes[n.value];if(r){if(null==e)i.prev=l.EMPTY,i.next=r.firstChild,r.firstChild=t,r.lastChild.isEmpty()&&(r.lastChild=r.firstChild);else{var u=this.getNode(e);i.prev=e,i.next=u.next,u.next=t,r.lastChild.equals(e)?r.lastChild=t:this.getNode(i.next).prev=t}null!==(o=this.onConnected[n.value])&&void 0!==o&&o.notify(i.ref)}else i.prev=l.EMPTY,i.next=l.EMPTY},p.prototype.disconnect=function(t){var n,e=this.nodes[t.value];if(e){var o=e.parent.value,i=this.nodes[o];i&&(i.firstChild.equals(t)&&(i.firstChild=e.next),i.lastChild.equals(t)&&(i.lastChild=e.prev)),e.prev.isEmpty()||(this.getNode(e.prev).next=e.next),e.next.isEmpty()||(this.getNode(e.next).prev=e.prev),e.parent=l.EMPTY,e.prev=l.EMPTY,e.next=l.EMPTY,null!==(n=this.onDisconnected[o])&&void 0!==n&&n.notify(e.ref)}},p.prototype.remove=function(t){this.disconnect(t);var n=this.nodes[t.value];null!=n&&(n.ref.id=l.EMPTY,this.nodes[t.value]=null,delete this.onConnected[t.value],delete this.onDisconnected[t.value])},p.prototype.dfs=function(t,n){for(var e=this.getNode(t).firstChild;!e.isEmpty();){var o=this.getNode(e),i=n(o.ref);if(i==a.STOP)return;if(i!=a.CONTINUE||o.firstChild.isEmpty()){for(;!e.equals(t)&&o.next.isEmpty();)e=o.parent,o=this.getNode(e);if(e.equals(t))return;e=o.next}else e=o.firstChild}},p.prototype.onChildConnected=function(t){var n;return null!=(n=this.onConnected[t.value])?n:this.onConnected[t.value]=new e.Observable},p.prototype.onChildDisconnected=function(t){var n;return null!=(n=this.onDisconnected[t.value])?n:this.onDisconnected[t.value]=new e.Observable},p),g=Object.freeze({__proto__:null,NodeId:l,nodeToModelRef:r,ModelRef:u,get DfsVisitBehavior(){return a},graph:v});(h=f=f||{})[h["CHAR"]=0]="CHAR",h[h["WILDCARD"]=1]="WILDCARD";var m=(y.prototype.isWildcard=function(){return this.kind==f.WILDCARD},y);function y(t,n){this.kind=t,this.char=null!=n?n:""}var S=(P.prototype.matches=function(t){for(var n=[!0],e=0;e<t.length;++e)n.push(!1);for(var o=0;o<this.tokens.length;++o){var i=this.tokens[o],r=n[0];for(n[0]=n[0]&&i.isWildcard(),e=0;e<t.length;++e){var u=n[e+1];n[e+1]=i.isWildcard()?u||n[e]:r&&t.charAt(e)==i.char,r=u}}return n[t.length]},P);function P(t){this.tokens=[],this.tokens="string"==typeof t?function(t){for(var n=[],e=!1,o=0;o<t.length;++o){var i=t.charAt(o);"\\"!==i||e?"*"!==i||e?(n.push(new m(f.CHAR,i)),e=!1):n.push(new m(f.WILDCARD)):e=!0}return n}(t):t}function C(t,n,e,o){var i=[];return v.dfs(t,function(t){return n(t)&&i.push(t),null==o||o<1||i.length<o?e?a.CONTINUE:a.SKIP_CHILDREN:a.STOP}),i}function w(t,n){var e=t.constants[n];return null==e||"string"!=typeof e?void 0:e}var T=Object.freeze({__proto__:null,Pattern:S,children:function(t){var n=[];return v.dfs(t,function(t){return n.push(t),a.SKIP_CHILDREN}),n},findByName:function(t,n,e,o){var i=new S(n);return C(t,function(t){var n=w(t,"name");return null!=n&&i.matches(n)},e,o)},findByIdentifier:function(t,n,e,o){return C(t,function(t){return w(t,"identifier")===n},e,o)}});return t.getCoreModule=o,t.log=function(t){o().log(t)},t.model=g,t.model_search=T,t}({},arfx);